<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/styles/background.css}">
    <link rel="icon" th:href="@{/icons/icons8-book-50.png}" type="image/png" />
    <link th:href="@{/bootstrap/css/bootstrap.css}" rel="stylesheet">
    <script th:src="@{/bootstrap/js/bootstrap.js}"></script>
</head>
<body>
    <!-- NAVIGATON PANEL / HEADER -->
    <nav th:fragment="navigbar" class="navbar navbar-expand-lg bg-transient container-md d-flex justify-content-around sticky-top">
      <a class="navbar-brand" th:href="@{/}" style="color: #33DFF0"><img th:src = "@{/icons/icons8-book-50.png}"><b>LibHub</b></a>
      <form class="d-flex container" method="post" th:action = "@{/}">
        <input class="form-control me-2" name="title" type="search" placeholder="Поиск" aria-label="Поиск">
      </form>
      <a class="navbar-brand" th:href="@{/login}"><img th:src = "@{/icons/icons8-male-user-50.png}"></a>
    </nav>

    <!-- OFFCANVAS FOR BOOKS AND AUTHORS MANAGMENT-->
    <div th:fragment="contentList" class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="ManageMenu">
      <div class="offcanvas-header border-3 border-bottom">
          <h5 class="offcanvas-title">Выбор содержимого</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Закрыть"></button>
      </div>
      <div class="offcanvas-body">
          <div>
              <a class="nav-item d-inline fs-3 link-dark" th:href="@{/lib-books}">Книги</a>
          </div>
          <div class="mt-3">
              <a class="nav-item d-inline fs-3 link-dark" th:href="@{/lib-authors}">Авторы</a>
          </div>
      </div>
  </div>

  <!-- PAGINATION FOR BOOKS AND AUTHORS MANAGMENT-->
  <div th:fragment="pagination_m">
    <div class="hstack gap-2 mb-3" th:if="${totalPages} > 1">
      <div class="pagination">
          <li class="page-item">
              <a th:if="${currPage != 1}" class="page-link" th:href="${1}">&laquo;</a>
              <span th:unless="${currPage != 1}" class="page-link">&laquo;</span>
          </li>
          <li class="page-item">
              <a th:if="${currPage != 1}" class="page-link" th:href="${currPage - 1}">Предыдущая</a>
              <span th:unless="${currPage != 1}" class="page-link">Предыдущая</span>
          </li>
      </div>

      <div th:if="${totalPages > pagesAmount}" class="pagination hstack gap-2">
          <div th:if="${pagesAmount > currPage}" th:each="i: ${#numbers.sequence(1, pagesAmount)}">
              <li class="page-item">
                  <a th:if="${currPage != i}" class="page-link" th:href="${i}">[[${i}]]</a>
                  <span th:unless="${currPage != i}" class="page-link">[[${i}]]</span>
              </li>
          </div>
          <div th:unless="${pagesAmount > currPage}" class="pagination hstack gap-2">
              <div th:if="${currPage != totalPages}" th:each="i: ${#numbers.sequence(currPage - pagesAmount + 2, currPage + 1)}">
                  <li class="page-item">
                      <a th:if="${currPage != i}" class="page-link" th:href="${i}">[[${i}]]</a>
                      <span th:unless="${currPage != i}" class="page-link">[[${i}]]</span>
                  </li>
              </div>
              <div th:unless="${currPage != totalPages}" th:each="i: ${#numbers.sequence(currPage - pagesAmount + 1, currPage)}">
                  <li class="page-item">
                      <a th:if="${currPage != i}" class="page-link" th:href="${i}">[[${i}]]</a>
                      <span th:unless="${currPage != i}" class="page-link">[[${i}]]</span>
                  </li>
              </div>
          </div>
      </div>
      <div th:unless="${totalPages > pagesAmount}" class="pagination hstack gap-2">
          <div th:if="${pagesAmount > currPage}" th:each="i: ${#numbers.sequence(1, totalPages)}">
              <li class="page-item">
                  <a th:if="${currPage != i}" class="page-link" th:href="${i}">[[${i}]]</a>
                  <span th:unless="${currPage != i}" class="page-link">[[${i}]]</span>
              </li>
          </div>
      </div>
     
      <div class="pagination">
          <li class="page-item">
              <a th:if="${currPage != totalPages}" class="page-link" th:href="${currPage + 1}">Следующая</a>
              <span th:unless="${currPage != totalPages}" class="page-link">Следующая</span>
          </li>
          <li class="page-item">
              <a th:if="${currPage != totalPages}" class="page-link" th:href="${totalPages}">&raquo;</a>
              <span th:unless="${currPage != totalPages}" class="page-link">&raquo;</span>
          </li>
      </div>    
  </div>
  </div>
    
</body>
</html>